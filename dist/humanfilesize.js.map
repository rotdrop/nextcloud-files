{"version":3,"file":"humanfilesize.js","names":["_l10n","require","humanList","formatFileSize","size","skipSmallSizes","arguments","length","undefined","order","Math","floor","log","min","readableFormat","relativeSize","pow","toFixed","parseFloat","substr","toLocaleString","getLanguage"],"sources":["../lib/humanfilesize.ts"],"sourcesContent":["import { getLanguage } from '@nextcloud/l10n'\n\nconst humanList = ['B', 'KB', 'MB', 'GB', 'TB'];\n\nexport function formatFileSize(size: number, skipSmallSizes: boolean = false): string {\n\n\t// Calculate Log with base 1024: size = 1024 ** order\n\tlet order = size > 0 ? Math.floor(Math.log(size) / Math.log(1024)) : 0;\n\t// Stay in range of the byte sizes that are defined\n\torder = Math.min(humanList.length - 1, order);\n\tconst readableFormat = humanList[order];\n\tlet relativeSize = (size / Math.pow(1024, order)).toFixed(1);\n\tif (skipSmallSizes === true && order === 0) {\n\t\tif (relativeSize !== \"0.0\") {\n\t\t\treturn '< 1 KB';\n\t\t} else {\n\t\t\treturn '0 KB';\n\t\t}\n\t}\n\tif (order < 2) {\n\t\trelativeSize = parseFloat(relativeSize).toFixed(0);\n\t} else if (relativeSize.substr(relativeSize.length - 2, 2) === '.0') {\n\t\trelativeSize = relativeSize.substr(0, relativeSize.length - 2);\n\t} else {\n\t\trelativeSize = parseFloat(relativeSize).toLocaleString(getLanguage());\n\t}\n\treturn relativeSize + ' ' + readableFormat;\n}\n"],"mappings":";;;;;;;;AAAA,IAAAA,KAAA,GAAAC,OAAA;AAEA,IAAMC,SAAS,GAAG,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;AAExC,SAASC,cAAcA,CAACC,IAAY,EAA2C;EAAA,IAAzCC,cAAuB,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;EAE3E;EACA,IAAIG,KAAK,GAAGL,IAAI,GAAG,CAAC,GAAGM,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,GAAG,CAACR,IAAI,CAAC,GAAGM,IAAI,CAACE,GAAG,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC;EACtE;EACAH,KAAK,GAAGC,IAAI,CAACG,GAAG,CAACX,SAAS,CAACK,MAAM,GAAG,CAAC,EAAEE,KAAK,CAAC;EAC7C,IAAMK,cAAc,GAAGZ,SAAS,CAACO,KAAK,CAAC;EACvC,IAAIM,YAAY,GAAG,CAACX,IAAI,GAAGM,IAAI,CAACM,GAAG,CAAC,IAAI,EAAEP,KAAK,CAAC,EAAEQ,OAAO,CAAC,CAAC,CAAC;EAC5D,IAAIZ,cAAc,KAAK,IAAI,IAAII,KAAK,KAAK,CAAC,EAAE;IAC3C,IAAIM,YAAY,KAAK,KAAK,EAAE;MAC3B,OAAO,QAAQ;IAChB,CAAC,MAAM;MACN,OAAO,MAAM;IACd;EACD;EACA,IAAIN,KAAK,GAAG,CAAC,EAAE;IACdM,YAAY,GAAGG,UAAU,CAACH,YAAY,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;EACnD,CAAC,MAAM,IAAIF,YAAY,CAACI,MAAM,CAACJ,YAAY,CAACR,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,KAAK,IAAI,EAAE;IACpEQ,YAAY,GAAGA,YAAY,CAACI,MAAM,CAAC,CAAC,EAAEJ,YAAY,CAACR,MAAM,GAAG,CAAC,CAAC;EAC/D,CAAC,MAAM;IACNQ,YAAY,GAAGG,UAAU,CAACH,YAAY,CAAC,CAACK,cAAc,CAAC,IAAAC,iBAAW,GAAE,CAAC;EACtE;EACA,OAAON,YAAY,GAAG,GAAG,GAAGD,cAAc;AAC3C"}